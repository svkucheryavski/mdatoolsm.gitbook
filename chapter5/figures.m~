close all
clear
clc

figfolder = '.';
figw = 400;
figh = 275;


%% model calibration (1)

load('people');

% split data to subsets

tind = 4:4:32;

Xc = people(:, {'Height', 'Income', 'Age', 'Beer', 'IQ'});
Xc.removerows(tind);
yc = people(:, 'Shoesize');
yc.removerows(tind);

Xt = people(tind, {'Height', 'Income', 'Age', 'Beer', 'IQ'});
yt = people(tind, 'Shoesize');

m = mdamlr(Xc, yc);

%% model calibration (2)

px = prep();
px.add('scale');

py = prep();
py.add('scale');

m = mdamlr(Xc, yc, 'Prep', {px, py});

%% exploring MLR results (1)

disp(m.calres)
disp(m.calres.ypred)
show([m.calres.yref m.calres.ypred])

disp(m.calres.stat)

s
nfig = 1;

figure
subplot 121
plotpredictions(m.calres)
subplot 122
plotyresiduals(m.calres)

printplot(gcf, sprintf('%s/fig%d.png', figfolder, nfig), [figw * 2, figh * 1], 'png', '-r150')

%% exploring MLR results (2)

nfig = 2;

figure
subplot 121
plotpredictions(m.calres, 'Marker', 's', 'Colorby', m.calres.yref)
subplot 122
plotyresiduals(m.calres, 'Color', 'c', 'Labels', 'names')

printplot(gcf, sprintf('%s/fig%d.png', figfolder, nfig), [figw * 2, figh * 1], 'png', '-r150')

%%

m = mdamlr(X, y, 'CV', {'full'}, 'Alpha', 0.01);

figure
plotregcoeffs(m)